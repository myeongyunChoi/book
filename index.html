<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>book</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="main.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div id="wrap">
        <header>
            <div class="logo">
                <a href="">
                    <img src="img/main/logo.png" alt="">
                </a>
            </div>
            <ul class="menu">
                <li>국내도서</li>
                <li>외국도서</li>
                <li>eBook</li>
                <li>웹소설</li>
                <li>중고샵</li>
            </ul>
            <a href="" class="login">로그인</a>
        </header>

        <div id="book_bg"></div>

        <div id="new_book">
            <div class="new_txt">
                <h2>새로운 이야기, 밀리의 서재</h2>
                <h4>대중이 직접 선택한 작가의 새로운 작품을 만나보세요.</h4>
            </div>
            <div class="new_book_box">
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
                <div class="new_box">
                    <div class="img_box"></div>
                    <div class="txt_box"></div>
                </div>
            </div>
        </div>
        <div id="best">
            <div class="best_txt">
                <h4>밀리의 서재 베트스셀러</h4>
                <h2>인기 트렌드 도서 추천</h2>
            </div>
            <ul class="category" id="cate">
                <li class="ct_li col">에세이</li>
                <li class="ct_li">소설/산문집</li>
                <li class="ct_li">시/운문집</li>
                <li class="ct_li">오디오북</li>
                <li class="ct_li">계발</li>
                <li class="ct_li">예술</li>
            </ul>
            <div class="best_wrap">
                <div class="essay">
                    <div class="essay_box"></div>
                    <div class="essay_box"></div>
                    <div class="essay_box"></div>
                    <div class="essay_box"></div>
                </div>
                <div class="novel">
                    <div class="novel_box"></div>
                    <div class="novel_box"></div>
                    <div class="novel_box"></div>
                    <div class="novel_box"></div>
                </div>
                <div class="poem">
                    <div class="poem_box"></div>
                    <div class="poem_box"></div>
                    <div class="poem_box"></div>
                    <div class="poem_box"></div>
                </div>
                <div class="audio">
                    <div class="audio_box"></div>
                    <div class="audio_box"></div>
                    <div class="audio_box"></div>
                    <div class="audio_box"></div>
                </div>
                <div class="enlightenment">
                    <div class="enlightenment_box"></div>
                    <div class="enlightenment_box"></div>
                    <div class="enlightenment_box"></div>
                    <div class="enlightenment_box"></div>
                </div>
                <div class="art">
                    <div class="art_box"></div>
                    <div class="art_box"></div>
                    <div class="art_box"></div>
                    <div class="art_box"></div>
                </div>
            </div>
        </div>
        <div id="genre">
            <div class="genre_txt">
                <h4>당신을 기다리는 11만권의 도서</h4>
                <h2>다양한 출판사들의 베스트셀러</h2>
                <h2>신간 오디오북부터 장르 소설까지</h2>
            </div>
            <div class="key">
                <span class="prev">&lt;</span>
                <span class="next">&gt;</span>
            </div>
            <div class="slide_wrap">
                <div class="overlay"></div>
                <ul class="slide">
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                    <li class="slide_box">
                        <div class="slide_img"></div>
                        <div class="slide_txt"></div>
                    </li>
                </ul>
            </div>
        </div>
        <div id="service">
            <div class="service_inner">
                <div class="service_box">
                    <h2>읽을 책을 알려주는 완독지수</h2> 
                    <h4>350만 밀리 회원이 먼저 읽고
                        다 읽을 확률과 예상 시간을 알려드려요.</h4>
                    <a href="" class="plus">+</a>
                </div>
                <div class="service_box service_2">
                    <h2>당신의 일상을 1밀리 +</h2> 
                    <h4>독서와 무제한 친해지리</h4>
                    <a href="" class="plus">+</a>
                </div>
                <div class="service_box">
                    <h2>당신을 기다리는 11만권의 도서</h2> 
                    <h4>첫 달 무료 구독을 통해
                        어떤 도서가 있는지 확인해보세요.</h4>
                        <a href="" class="plus">+</a>
                </div>
            </div>
        </div>
        <footer>
            <span class="fot_logo">
                <a href="">(주)밀리의 서재</a>
            </span>
            <div class="more">
                <ul class="guide">
                    <li><a href="">이용약관</a></li>
                    <li><a href="">개인정보처리방침</a></li>
                    <li><a href="">청소년보호정책</a></li>
                    <li><a href="">고객센터</a></li>
                    <li><a href="">B2B 문의</a></li>
                    <li><a href="">콘텐츠 제휴문의</a></li>
                    <li><a href="">뷰어 다운로드</a></li>
                    <li><a href="">회사 소개</a></li>
                </ul>
                <ul class="sns">
                    <li><a href=""><img src="img/common/inst.png" alt=""></a></li>
                    <li><a href=""><img src="img/common/icon.png" alt=""></a></li>
                    <li><a href=""><img src="img/common/post.png" alt=""></a></li>
                    <li><a href=""><img src="img/common/blog.png" alt="" class="blog"></a></li>
                </ul>
            </div>
            <p>Copyright © 2022 밀리의 서재 All Rights Reserved.</p>
        </footer>
    </div>
    <script>
        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "산문", sort: "latest", page: "5" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let new_box = document.getElementsByClassName("new_box");
                for (let i = 0; i < new_box.length; i++) {
                    $(".img_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".img_box").eq(i).append("<h3 class='img_h3'>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".txt_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".txt_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 65);

                    $(".txt_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".txt_box").eq(i).append('<a href="#" class="btn">' + "more" + "</a>");

                }
            });//상단8개


        $(function () {
            $(".new_box").children().mouseover(function () {
                $(this).children(".img_h3").hide();
                $(this).siblings(".txt_box").stop().fadeIn(500).css("display", "flex");
            });
            $(".new_box").mouseleave(function () {
                $(".txt_box").hide();
                $(".img_h3").fadeIn(500);
            });
        });


        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "에세이", sort: " accuracy", page: "11" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let essay_box = document.getElementsByClassName("essay_box");
                for (let i = 0; i < essay_box.length; i++) {
                    $(".essay_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".essay_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".essay_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 92);

                    $(".essay_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".essay_box").eq(i).append('<a href="#" class="btn">' + "MORE" + "</a>");
                }
            });


        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "소설", sort: " accuracy", page: "11" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let novel_box = document.getElementsByClassName("novel_box");
                for (let i = 0; i < novel_box.length; i++) {
                    $(".novel_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".novel_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".novel_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 92);

                    $(".novel_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".novel_box").eq(i).append('<a href="#" class="btn">' + "MORE" + "</a>");
                }
            });

        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "시", sort: " accuracy", page: "11" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let poem_box = document.getElementsByClassName("poem_box");
                for (let i = 0; i < poem_box.length; i++) {
                    $(".poem_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".poem_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".poem_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 92);

                    $(".poem_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".poem_box").eq(i).append('<a href="#" class="btn">' + "MORE" + "</a>");
                }
            });

        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "오디오북", sort: " accuracy", page: "10" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let audio_box = document.getElementsByClassName("audio_box");
                for (let i = 0; i < audio_box.length; i++) {
                    $(".audio_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".audio_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".audio_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 92);

                    $(".audio_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".audio_box").eq(i).append('<a href="#" class="btn">' + "MORE" + "</a>");
                }
            });

        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "자기계발", sort: " accuracy", page: "11" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let enlightenment_box = document.getElementsByClassName("enlightenment_box");
                for (let i = 0; i < enlightenment_box.length; i++) {
                    $(".enlightenment_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".enlightenment_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".enlightenment_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 92);

                    $(".enlightenment_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".enlightenment_box").eq(i).append('<a href="#" class="btn">' + "MORE" + "</a>");
                }
            });

        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "예술", sort: " accuracy", page: "11" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let art_box = document.getElementsByClassName("art_box");
                for (let i = 0; i < art_box.length; i++) {
                    $(".art_box").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".art_box").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".art_box").eq(i).append("<h5>" + msg.documents[i].authors + "</h5>");


                    let str = msg.documents[i].contents;
                    let str2 = str.substring(0, 92);

                    $(".art_box").eq(i).append("<p>" + '<a href="">' + str2 + "..." + "</a>" + "</p>");
                    $(".art_box").eq(i).append('<a href="#" class="btn">' + "MORE" + "</a>");
                }
            });

        cate.onclick = function (e) {
            let cat = document.querySelectorAll(".category li");
            let best_inner = document.querySelectorAll(".best_wrap > div");
            for (var i = 0; i < cat.length; i++) {

                cat[i].classList.remove("col");
                if (e.target == cat[i]) {
                    e.target.classList.add("col");
                }

                cat[i].setAttribute("data-index", i);
                best_inner[i].setAttribute("data-index", i);

                if (e.target.getAttribute("data-index") == best_inner[i].getAttribute("data-index")) {
                    best_inner[i].style.opacity = "1";
                    // }else if(e.target != cat[i]){
                    //     best_inner[i].style.opacity = "1";
                } else {
                    best_inner[i].style.opacity = "0";
                }
            }
        }

        let slides = document.querySelector(".slide");
        let slideImg = document.querySelectorAll(".slide li");
        currentIdx = 0;
        slideCount = slideImg.length;
        prev = document.querySelector(".prev");
        next = document.querySelector(".next");
        slideWidth = window.innerWidth / 5;//한 화면에 출력하고 싶은 이미지의 수
        slideMargin = 0;
        makeClone();
        initfunction();
        function makeClone() {
            // for(let i = 0; i< 5; i++){
            let cloneSlide_first = slideImg[0].cloneNode(true);
            let cloneSlide_second = slideImg[1].cloneNode(true);
            let cloneSlide_third = slideImg[2].cloneNode(true);
            let cloneSlide_fourth = slideImg[3].cloneNode(true);
            let cloneSlide_five = slideImg[4].cloneNode(true);
            let cloneSlide_last = slides.lastElementChild.cloneNode(true);
            slides.append(cloneSlide_first);
            slides.append(cloneSlide_second);
            slides.append(cloneSlide_third);
            slides.append(cloneSlide_fourth);
            slides.append(cloneSlide_five);
            slides.insertBefore(cloneSlide_last, slides.firstElementChild);
        }//무한슬라이드를 위한 클론 생성 윈도우 이너에 들어가는 박스 수만큼( 5 )

        function initfunction() {
            slides.style.width = slideWidth * (slideCount + 6) + "px";
            slides.style.left = -(slideWidth) + "px";
        }//슬라이드 한면의 넓이와 슬라이드 한 칸의 넓이

        next.addEventListener("click", function () {
            if (currentIdx <= slideCount - 1) {
                slides.style.left = -(currentIdx + 2) * (slideWidth + slideMargin) + "px";
                slides.style.transition = "0.75s ease-out";
            }
            // for (let o = 0; o < slideCount; o++) {
            //     slideImg[o].classList.remove("opa");
            // }

            // let x = 5;
            // slideImg[x].classList.add("opa");
            // x++;
            // if( x == slideCount){
            //     x=9;
            // }


            if (currentIdx === slideCount - 1) {
                setTimeout(function () {
                    slides.style.left = -(slideWidth + slideMargin) + "px";
                    slides.style.transition = "0s ease-out";
                }, 750);
                currentIdx = -1;
            }
            currentIdx += 1;
        });
        prev.addEventListener("click", function () {
            if (currentIdx >= 0) {
                slides.style.left = -currentIdx * (slideWidth + slideMargin) + "px";
                slides.style.transition = `${0.5}s ease-out`;
            }
            if (currentIdx === 0) {
                setTimeout(function () {
                    slides.style.left = -slideCount * (slideWidth + slideMargin) + "px";
                    slides.style.transition = `${0}s ease-out`;
                }, 500);
                currentIdx = slideCount;
            }
            currentIdx -= 1;
        });

        //
        $.ajax({
            method: "GET",
            url: "https://dapi.kakao.com/v3/search/book?target=title",
            data: { query: "소설", sort: " accuracy", page: "5" },
            headers: { Authorization: "KakaoAK 7825d323e9c066c84dbfeebce8829253" }
        })
            .done(function (msg) {
                let slide_box = document.getElementsByClassName("slide_box");
                for (let i = 0; i < slide_box.length + 6; i++) {
                    $(".slide_img").eq(i).append('<a href="#">' + "<img src='" + msg.documents[i].thumbnail + "'/>" + "</a>");
                    $(".slide_txt").eq(i).append("<h3>" + '<a href="">' + msg.documents[i].title + "</a>" + "</h3>");
                    $(".slide_txt").eq(i).append("<h5>" + msg.documents[i].authors + " | " + msg.documents[i].publisher + "</h5>");
                }
            });//슬라이드 도서
        // const slider = document.querySelector(".slide");
        // let isDown = false;
        // let startX;
        // let scrollLeft;

        // // 시작했을 때 마우스 위치
        // slider.addEventListener("mousedown", function (e) {
        //     isDown = true;
        //     startX = e.pageX;
        //     scrollLeft = slider.scrollLeft;
        // });
        // slider.addEventListener("mouseleave", function () {
        //     isDown = false;
        // });
        // slider.addEventListener("mouseup", function () {
        //     isDown = false;
        // });
        // slider.addEventListener("mousemove", function (e) {
        //     if (!isDown) return;
        //     e.preventDefault();
        //     const x = e.pageX;
        //     const walk = (x - startX);
        //     slider.scrollLeft = scrollLeft - walk;
        // });

    </script>
</body>

</html>